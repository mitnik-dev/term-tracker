<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:controls="clr-namespace:TermTracker.Views.Components"
             x:Class="TermTracker.Views.TermPage"
             Title="Term Info">
    <Shell.TitleView>
        <Grid Padding="0,0,36,0" ColumnDefinitions="*,Auto,Auto">
            <Label Text="Dashboard"
                   FontFamily="InterMedium18"
                   FontSize="20"
                   TextColor="{StaticResource Text}"
                   VerticalTextAlignment="Center"
                   Grid.Column="0" />
            <Image Source="bell.png"
                   WidthRequest="24"
                   HeightRequest="24"
                   Grid.Column="1"
                   Margin="0,0,16,0"
                   VerticalOptions="Center">
                <Image.GestureRecognizers>
                    <TapGestureRecognizer Tapped="OnNotificationsClicked" />
                </Image.GestureRecognizers>
            </Image>
            <Image Source="edit_page.png"
                   WidthRequest="24"
                   HeightRequest="24"
                   Grid.Column="2"
                   VerticalOptions="Center">
                <Image.GestureRecognizers>
                    <TapGestureRecognizer Tapped="OnEditTermClicked" />
                </Image.GestureRecognizers>
            </Image>
        </Grid>
    </Shell.TitleView>
    <ScrollView Padding="30,12,30,30">
        <VerticalStackLayout Spacing="20">
            <VerticalStackLayout Spacing="4">
                <Label x:Name="TermStatusLabel" FontAttributes="Italic" TextColor="{StaticResource TextMuted}"/>
                <Label x:Name="TermNameLabel"
                       Style="{StaticResource HeaderText}"
                       VerticalOptions="End" />

                <Label x:Name="DateRange"/>
            </VerticalStackLayout>
            <VerticalStackLayout Spacing="10">
                <Label Text="Active Courses"/>

                <controls:CardContainer x:Name="CurrentCoursesContainer"
                           ItemsSource="{Binding CurrentCourses}"
                           ShowAddButton="False"
                           CardClicked="OnCourseCardClicked">
                    <controls:CardContainer.ItemTemplate>
                        <DataTemplate>
                            <controls:CardDetailed Course="{Binding .}"
                                                   AcademicType="Courses"/>
                        </DataTemplate>
                    </controls:CardContainer.ItemTemplate>
                </controls:CardContainer>

                <Frame x:Name="NoActiveCoursesMessage" IsVisible="False">
                    <Label Text="No Active Courses"
                           FontAttributes="Italic"/>
                </Frame>
                    
            </VerticalStackLayout>

            <VerticalStackLayout Spacing="10">
                <Label Text="Other Courses"/>

                <controls:SearchBar x:Name="CourseSearchBar"
                                    Placeholder="Search courses..."
                                    SearchTextChanged="OnSearchTextChanged"/>

                <controls:CardContainer x:Name="OtherCoursesContainer"
                                        ItemsSource="{Binding OtherCourses}"
                                        AddButtonClicked="OnAddClicked"
                                        CardClicked="OnCourseCardClicked">
                    <controls:CardContainer.ItemTemplate>
                        <DataTemplate>
                            <controls:CardCompact Course="{Binding .}"/>
                        </DataTemplate>
                    </controls:CardContainer.ItemTemplate>
                </controls:CardContainer>
            </VerticalStackLayout>
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>